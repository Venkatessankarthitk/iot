<!DOCTYPE html>
<html>
<head>
   <title>Realtime Data</title>
   <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
        <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css" />
        <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/dataTables.material.min.css" />
        <link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" />
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
   <link rel="stylesheet" href="https://cdn.datatables.net/v/dt/dt-1.10.12/se-1.2.0/datatables.min.css">
   <link rel="stylesheet" href="https://cdn.datatables.net/colreorder/1.5.1/js/dataTables.colReorder.min.js">
   <link rel="stylesheet" href="https://gyrocode.github.io/jquery-datatables-checkboxes/1.2.7/css/dataTables.checkboxes.css"/>
</head>

<body class="mdc-typography">
        <header class="mdc-top-app-bar mdc-top-app-bar-fill-color($color) mdc-top-app-bar--short">
                <div class="mdc-top-app-bar__row">
                    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                        <!-- <a href="#" class="menu material-icons mdc-top-app-bar__navigation-icon">menu</a> -->
                        <span class="mdc-top-app-bar__title">IOT POC</span>
                    </section>
                    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" role="toolbar">
                        <span class="mdc-typography--button">{{ request.user.username }}</span>
                        <a href="{% url 'logout' %}" class="material-icons mdc-top-app-bar__action-item" aria-label="Logout" alt="Logout">power_settings_new</a>
                    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" role="toolbar">
                        <div  class="toolbar mdc-menu-anchor">
                            <a id="menu-button" class="material-icons mdc-top-app-bar__action-item" >more_vert</a>
                            <div id="toolbar" class="mdc-menu" tabindex="-1">
                                <ul class="mdc-menu__items mdc-list" role="menu" aria-hidden="true">
                                    <li class="mdc-list-item" role="menuitem" tabindex="0">
                                    A Menu Item
                                    </li>
                                    <li class="mdc-list-item" role="menuitem" tabindex="0">
                                    Another Menu Item
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </section>
                </div>
            </header>
            <div class="mdc-layout-grid" style="margin-top:56px;">
                    <div class="mdc-layout-grid__inner">
                        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-2">
                                <ul class="mdc-list" aria-orientation="vertical">
                                        <a href="{% url 'postdata' %}" class="mdc-list-item" tabindex="0">
                                            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">dashboard</i>
                                            Dashboard
                                        </a>
                                        <li class="mdc-list-divider" role="separator"></li>
                                        <a href="{% url 'postdata' %}" class="mdc-list-item" tabindex="0">
                                            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">ballot</i>
                                            IOT
                                        </a>
                                        <a href="{% url 'rpm' %}" class="mdc-list-item" tabindex="0">
                                            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">shuffle</i>
                                            RPM
                                        </a>
                                        <li class="mdc-list-divider" role="separator"></li>
                                        <a href="{% url 'postdata' %}" class="mdc-list-item" tabindex="0">
                                            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">compare_arrows</i>
                                            SPEED
                                        </a>
                                        <li class="mdc-list-divider" role="separator"></li>
                                        <a href="{% url 'postdata' %}" class="mdc-list-item" tabindex="0">
                                            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">category</i>
                                            TAG
                                        </a>
                                    </div>
                                    <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-10">
                                        {% block content %}{% endblock %} 
                                    

    
    {% csrf_token %}

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript">
  
function getRPM(){

    
}

function drawChart(rpm) {


  var json = {

    cols: [
      {id: 'A', label: 'RPM', type: 'number'}
    ],
    rows: [
      {c:[
          
        {v: rpm}
      ]}
    ]
  };

  // be sure to use the 'new' keyword here...
  var data = new google.visualization.DataTable(json);

  var chart = new google.visualization.Gauge(document.getElementById('gaugediv'));
  
  chart.draw(data, options);
}


google.charts.load('current', {'packages':['gauge']});
google.charts.setOnLoadCallback(drawChart);

      function drawChart() {

        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['RPM', 1000],
        //   ['SPEED', 180]
        ]);

        var options = {
            width: 600,
            height: 300,
            redFrom: 4000,
            redTo: 6000,
            greenFrom: 1000,
            greenTo: 3000,
            yellowFrom: 3000,
            yellowTo: 4000,
            minorTicks: 10,
            min: 0,
            max: 6000,
            majorTicks: 5,
            animation: {
            duration: 100
            }
        };

        // var speedoptions = {
        //     width: 600,
        //     height: 300,
        //     redFrom: 140,
        //     redTo: 180,
        //     greenFrom: 60,
        //     greenTo: 100,
        //     yellowFrom: 100,
        //     yellowTo: 140,
        //     minorTicks: 10,
        //     min: 0,
        //     max: 180,
        //     majorTicks: 5,
        //     animation: {
        //     duration: 100
        //     }
        // };


        var chart = new google.visualization.Gauge(document.getElementById('gaugediv'));

        chart.draw(data, options);

        setInterval(function() {

            $.ajax({
                url : 'liverpm',
                method : 'GET',
                success: function(rpm){
                    data.setValue(0, 1, rpm);
                    chart.draw(data, options);
                }
            });
          
        }, 1000);
    
        
        // setInterval(function() {
        //     $.ajax({
        //         url : 'livespeed',
        //         method : 'GET',
        //         success: function(speed){
        //             data.setValue(0, 1, speed);
        //             chart.draw(data, speedoptions);
        //         }
        //     });
        // }, 100);
      }



     </script>
   </head>
   <body>
     <div id="gaugediv" ></div>
   </body>
</div>
</div>
</div>

    

